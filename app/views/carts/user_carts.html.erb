
<article>

<h1>Your Carts</h1>
<hr style="height: 5px">
<% if @carts.present? %>

    <% @carts.each do |cart| %>
    <hr style="height: 3px">
    <h3>Date of Cart :<%= cart.created_at %>.</h3><br>
    <hr>
    <h5>Invoice_id: <%="#{cart.id}."%> </h5>
        <table class="table">
        <thead class="thead-dark">
            <th>Quantity</th>
            <th>Image Name</th>
            <th>Cost/Unit</th>
            <th>Cost</th>
            <% if !cart.status %>
                <th>Set Qty</th>
                <th></th>
                <th></th>
            <% else %>
                <th></th>
                <th></th>
                <th></th>
            <% end %>
        </thead>
            <% @orders_of_carts.where(cart_id: cart.id).each do |line_item| %>
            <tr>
                <td><%= line_item.quantity %></td>
                <td><%= line_item.image_info.name %></td>
                <td><%= line_item.image_info.price %></td>
                <td><%= number_to_currency(line_item.total_price) %></td> 
                <% if !cart.status %>
                    <td><%= link_to  'Update Cart', "javascript:void(0)" , data: {id: "#{line_item.image_info.id}" },class: "add_cart_image_info btn btn-outline-primary btn-sm"  %></td>
                    <td><%= link_to 'Delete Product', line_item_path(line_item),method: :delete ,data: { confirm: 'Are you sure?' }, class: "btn btn-outline-warning btn-sm" %></td>
                    <% else %>
                    <td></td>
                    <td></td>
                    <td></td>
                <% end %>
            </tr>
            <% end %>
        <tfoot>
            <tr>
                <th colspan="3">Total:</th>
                <td class="price"><%= number_to_currency(cart.total_price) %></td>
            </tr>
            <% if cart.status %>
            <tr>
                <th colspan="5"></th>
                <td>Order status is successfull.</td>
            </tr>
            <% else %>
            <tr>
                <th colspan="5"></th>
                <td>Your Order is Pending.</td>
            </tr>
            <% end %>
        </tfoot>
        </table>
        <% if !cart.status %>
            <%= button_to 'Empty cart', cart, method: :delete, data: { confirm: 'Are you sure?' } %>
        <% end %>
        <hr>
        <%= link_to 'back to Catalog', '/', class: "btn btn-info" %>
    <% end %>
    <hr style="3px"></hr>
<% else %>
    <h1>No carts generated yet</h1>
<% end %>

</article>